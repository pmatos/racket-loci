<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>loci</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">loci</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._documentation%29" class="tocviewlink" data-pltdoc="x">API Documentation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._motivation%29" class="tocviewlink" data-pltdoc="x">Motivation</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._loci%29" class="tocsubseclink" data-pltdoc="x">loci</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._documentation%29" class="tocsubseclink" data-pltdoc="x">API Documentation</a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-enabled~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">locus-<wbr></wbr>enabled?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">locus?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dynamic-<wbr></wbr>locus</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">locus</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%2Fcontext%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">locus/<span class="mywbr"> &nbsp;</span>context</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-wait%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">locus-<wbr></wbr>wait</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-dead-evt%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">locus-<wbr></wbr>dead-<wbr></wbr>evt</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-kill%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">locus-<wbr></wbr>kill</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._motivation%29" class="tocsubseclink" data-pltdoc="x">Motivation</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">7.8.0.9</span></div><h2><a name="(part._loci)"></a>loci</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Paulo Matos &lt;<a href="mailto:pmatos@linki.tools">pmatos@linki.tools</a>&gt;</p></span></div><p><span class="emph">Locus (pl. loci): the place where something is situated or occurs;</span> - <a href="https://www.merriam-webster.com/dictionary/locus">Merriam-Webster Dictionary</a></p><p><font class="badlink"><span class="techoutside"><span class="techinside">Loci</span></span></font> enables the development of parallel programs that can take
advantage of machines with multiple processors, cores or hardware
threads... but this time for real!</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Currently, the loci library only works on Linux and
MacOS due to the use of unix channels for communication between loci.</p></blockquote></blockquote></blockquote><p>This library attempts to follow the places API very closely. When this
is not the case, feel free to
<a href="https://github.com/LinkiTools/racket-loci">report a
bug</a>. As opposed to places from the standard library, loci use OS
processes instead of OS threads to allow the parallelization of
multiple tasks. Up until 16 simultaneous places there&rsquo;s very little
different between loci and places but once you go into 32, 64, 144,
256, etc. core machines then places will break down and stop working
properly due to memory allocation inter-thread locking.</p><h3>1<tt>&nbsp;</tt><a name="(part._documentation)"></a><a name="(mod-path._loci)"></a>API Documentation</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><a href="#%28mod-path._loci%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">loci</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/loci" title="Install this package using `raco pkg install loci`"><span class="stt">loci</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._locus-enabled~3f))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-enabled~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">locus-enabled?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">boolean?</span></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span>. It exists for compatibility with the place API.
Loci are always enabled.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._locus~3f))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">locus?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">boolean?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a name="(tech._locus._descriptor)"></a><span style="font-style: italic">locus descriptor</span>
value, <span class="RktVal">#f</span> otherwise. Every <a href="#%28tech._locus._descriptor%29" class="techoutside" data-pltdoc="x"><span class="techinside">locus descriptor</span></a> is also
a <font class="badlink"><span class="techoutside"><span class="techinside">locus channel</span></span></font>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._dynamic-locus))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="RktValDef RktValLink" data-pltdoc="x">dynamic-locus</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">module-path</span><span class="hspace">&nbsp;</span><span class="RktVar">start-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="RktValLink" data-pltdoc="x">locus?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">module-path?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">path?</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">symbol?</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <font class="badlink"><span class="techoutside"><span class="techinside">locus</span></span></font> to run the procedure that is identified by
<span class="RktVar">module-path</span> and <span class="RktVar">start-name</span>. The result is a
<a href="#%28tech._locus._descriptor%29" class="techoutside" data-pltdoc="x"><span class="techinside">locus descriptor</span></a> value that represents the new parallel task;
the locus descriptor is returned immediatelly. The locus descriptor is also a
<font class="badlink"><span class="techoutside"><span class="techinside">locus channel</span></span></font> that permits communication with the locus.</div></p><p>The module indicated by <span class="RktVar">module-path</span> must export a function
with the name <span class="RktVar">start-name</span>. The function must accept a single
argument, which is a <font class="badlink"><span class="techoutside"><span class="techinside">locus channel</span></span></font> that corresponds to the
other end of communication for the <a href="#%28tech._locus._descriptor%29" class="techoutside" data-pltdoc="x"><span class="techinside">locus descriptor</span></a> returned
by <span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxLink" data-pltdoc="x">locus</a></span>.</p><p>When the <font class="badlink"><span class="techoutside"><span class="techinside">locus</span></span></font> is created, the initial <font class="badlink"><span class="techoutside"><span class="techinside">exit handler</span></span></font>
terminates the locus, using the argument to the exit handler as the
locus&rsquo; <a name="(tech._completion._value)"></a><span style="font-style: italic">completion value</span>. Use <span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">exit</span></span></span><span class="stt"> </span><span class="RktVar">v</span><span class="RktPn">)</span> to
immediatelly terminate a locus with the completion value
<span class="RktVar">v</span>. Since a completion value is limited to an exact integer
between <span class="RktVal">0</span> and <span class="RktVal">255</span>, any other value for <span class="RktSym">v</span>
is converted to <span class="RktVal">0</span>.</p><p>If the function indicated by <span class="RktVar">module-path</span> and
<span class="RktVar">start-name</span> returns, the the locus terminates with the
<a href="#%28tech._completion._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">completion value</span></a> <span class="RktVal">0</span>.</p><p>In the created locus, the <span class="RktSym"><span class="badlink"><span class="RktValLink">current-input-port</span></span></span> parameter is
set to an empty input port, while the values of the
<span class="RktSym"><span class="badlink"><span class="RktValLink">current-output-port</span></span></span> and <span class="RktSym"><span class="badlink"><span class="RktValLink">current-error-port</span></span></span>
parameters are connected to the ports in the creating locus.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._loci/main..rkt)._locus))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">locus</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"> {
  Creates a locus that evaluates <span class="RktSym">body</span>
  expressions with <span class="RktSym">id</span> bound to a locus channel.  The
  <span class="RktSym">body</span>s close only over <span class="RktSym">id</span> plus the top-level
  bindings of the enclosing module, because the
  <span class="RktSym">body</span>s are lifted to a submodule.
  The result of <span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxLink" data-pltdoc="x">locus</a></span> is a locus descriptor,
  like the result of <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="RktValLink" data-pltdoc="x">dynamic-locus</a></span>.</div></p><p>The generated submodule has the name <span class="RktSym">locus-body-<span class="RktVar">n</span></span>
for an integer <span class="RktVar">n</span>, and the submodule exports a <span class="RktSym">main</span>
function that takes a locus channel for the new locus. The submodule
is not intended for use, however, except by the expansion of the
<span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxLink" data-pltdoc="x">locus</a></span> form.</p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxLink" data-pltdoc="x">locus</a></span> binding is protected in the same way as
 <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="RktValLink" data-pltdoc="x">dynamic-locus</a></span>.
 }</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._loci/main..rkt)._locus/context))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%2Fcontext%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">locus/context</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._loci%2Fmain..rkt%29._locus%29%29" class="RktStxLink" data-pltdoc="x">locus</a></span>, but <span class="RktVar">body</span><span class="stt"> </span><span class="RktMeta"><span class="badlink"><span class="RktValLink">...</span></span></span> may have free lexical
variables, which are automatically sent to the newly-created locus.
Note that these variables must have values accepted by
<span class="RktSym"><span class="badlink"><span class="RktValLink">locus-message-allowed?</span></span></span>, otherwise an <span class="RktSym"><span class="badlink"><span class="RktValLink">exn:fail:contract</span></span></span> exception is raised.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._locus-wait))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-wait%29%29" class="RktValDef RktValLink" data-pltdoc="x">locus-wait</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">exact-integer?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">l</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="RktValLink" data-pltdoc="x">locus?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the <a href="#%28tech._completion._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">completion value</span></a> of the locus indicated by <span class="RktVar">l</span>,
blocking until the locus has terminated.</div></p><p>If any pumping threads were created to connect a
non-<font class="badlink"><span class="techoutside"><span class="techinside">file-stream port</span></span></font> to the ports in the locus for <span class="RktVar">l</span>
(see <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="RktValLink" data-pltdoc="x">dynamic-locus</a></span>), <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-wait%29%29" class="RktValLink" data-pltdoc="x">locus-wait</a></span> returns only when
the pumping threads have completed.  </p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._locus-dead-evt))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-dead-evt%29%29" class="RktValDef RktValLink" data-pltdoc="x">locus-dead-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">evt?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">l</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="RktValLink" data-pltdoc="x">locus?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <font class="badlink"><span class="techoutside"><span class="techinside">synchronizable event</span></span></font> (see <font class="badlink">(part "sync")</font>) that is
<font class="badlink"><span class="techoutside"><span class="techinside">ready for synchronization</span></span></font> if and only if <span class="RktVar">l</span> has terminated.
The <font class="badlink"><span class="techoutside"><span class="techinside">synchronization result</span></span></font> of a locus-dead event is the locus-dead event itself.</div></p><p>If any pumping threads were created to connect a non-<font class="badlink"><span class="techoutside"><span class="techinside">file-stream
port</span></span></font> to the ports in the locus for <span class="RktVar">l</span> (see
  <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._dynamic-locus%29%29" class="RktValLink" data-pltdoc="x">dynamic-locus</a></span>), the event returned by
  <span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-dead-evt%29%29" class="RktValLink" data-pltdoc="x">locus-dead-evt</a></span> may become ready even if a pumping thread is
  still running.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._loci/main..rkt)._locus-kill))"></a><span title="Provided from: loci | Package: loci"><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus-kill%29%29" class="RktValDef RktValLink" data-pltdoc="x">locus-kill</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">void?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">l</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._loci%2Fmain..rkt%29._locus~3f%29%29" class="RktValLink" data-pltdoc="x">locus?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Immediately terminates the locus, setting the locus&rsquo;
<a href="#%28tech._completion._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">completion value</span></a> to <span class="RktVal">1</span> if the locus does not have a
completion value already.</div></p><h3>2<tt>&nbsp;</tt><a name="(part._motivation)"></a>Motivation</h3><p>Given a problem that requires parallelism, where you use all the
available cores in your machine, the Racket answer as been places.
I happily used places for a long time until I started stressing tests
by getting larger and larger machines (up to 144 cores) and starting
144 places simultaneously. I noticed that once I exceeded 12 cores
something started to go wrong, in particular the cores were idle most
of the time and there was a lot of kernel locking taking place. This
triggered me sending a
<a href="https://groups.google.com/d/msg/racket-users/oE72JfIKDO4/zbFI6knhAQAJ">message</a>
to the Racket mailing list for help.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>